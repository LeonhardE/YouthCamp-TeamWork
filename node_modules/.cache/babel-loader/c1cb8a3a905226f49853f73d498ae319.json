{"ast":null,"code":"var _jsxFileName = \"/Users/danni/Documents/GitHub/YouthCamp_TeamWork/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport RowItem from './component/RowItem.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst content = ['爱奇艺会员', 'MacBook', '精美图书', '餐饮代金券', 'B站大会员', '巴厘岛7日游', 'iPhone 12', '钻石100'];\nconst itemId = [0, 1, 2, 3, 4, 5, 6, 7];\nconst gainList = [];\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      // 被选中的格子的ID\n      activedId: '',\n      // 中奖ID\n      prizeId: null,\n      // 获得prizeId之后计算出的动画次数\n      times: 0,\n      // 当前动画次数\n      actTimes: 0,\n      // 是否正在抽奖\n      isRolling: false,\n      // 金币\n      gold: 0,\n      // 中奖数组\n      gainList: []\n    };\n  }\n\n  handleBegin() {\n    // 判断是否在抽取过程中，以及金币是否足够\n    if (!this.state.isRolling && this.state.gold > 10) {\n      // 前端随机获取一个中奖ID，后续工作希望使用NodeJS在后端进行抽奖\n      let prize = Math.floor(Math.random() * 8); // console.log(prize)\n      // 随机算出一个动画执行的最小次数，这里可以随机变更数值，按自己的需求来\n\n      let randtimes = itemId.length * Math.floor(Math.random() * 4 + 3); // 设置状态\n\n      this.setState({\n        activedId: 0,\n        prizeId: prize,\n        times: randtimes,\n        actTimes: 0,\n        isRolling: true,\n        gold: this.state.gold - 10\n      }); // 抽奖动画执行开始\n\n      this.begin = setInterval(() => {\n        if (this.state.activedId === this.state.prizeId && this.state.actTimes > this.state.times) {\n          // 符合上述所有条件时才是中奖的时候，两个ID相同并且动画执行的次数大于(或等于也行)设定的最小次数\n          clearInterval(this.begin);\n          this.setState({\n            isRolling: false\n          });\n          alert('恭喜获得 ' + content[this.state.prizeId] + '！请联系管理员兑换奖品');\n          gainList.push(content[this.state.prizeId]); // console.log(gainList);\n\n          return;\n        } // 以下是动画执行时对id的判断\n\n\n        if (this.state.activedId === 7) {\n          this.setState({\n            activedId: 0,\n            actTimes: this.state.actTimes + 1\n          });\n        } else {\n          this.setState({\n            activedId: this.state.activedId + 1,\n            actTimes: this.state.actTimes + 1\n          });\n        }\n      }, 100);\n    } else if (!this.state.isRolling && this.state.gold < 10) {\n      // 余额不足\n      alert('金币余额不足，请充值');\n    }\n  }\n\n  chargeGold() {\n    // 充值\n    this.setState({\n      gold: this.state.gold + 100\n    });\n  } // showGainList()\n  // {\n  //   return\n  // }\n\n\n  render() {\n    const {\n      activedId,\n      gold\n    } = this.state;\n    const newArr = [];\n    gainList.forEach((ele, index) => {\n      var temp = /*#__PURE__*/_jsxDEV(\"li\", {\n        children: ele\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 18\n      }, this);\n\n      newArr.push(temp);\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"title\",\n        children: \"\\u5E78 \\u8FD0 \\u5927 \\u62BD \\u5956\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"left\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"intro\",\n          children: \"\\u6B22\\u8FCE\\u6765\\u5230\\u5E78\\u8FD0\\u5927\\u62BD\\u5956\\uFF01\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"intro\",\n          children: \"\\u4EE5\\u4E0B\\u4E3A\\u60A8\\u76EE\\u524D\\u6240\\u6301\\u7684\\u91D1\\u5E01\\u6570\\u91CF\\u3002\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"goldNum\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"goldNumText\",\n            children: [\"\\u91D1 \\u5E01: \", gold, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"charge__btn\",\n          onClick: () => this.chargeGold(),\n          children: \"\\u5145 \\u503C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"centre\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"prize__container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container__area\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"begin__btn\",\n              onClick: () => this.handleBegin(),\n              children: \"\\u70B9\\u51FB\\u5F00\\u59CB\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"area__row\",\n              children: [/*#__PURE__*/_jsxDEV(RowItem, {\n                content: content[0],\n                itemId: itemId[0],\n                activedId: activedId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(RowItem, {\n                content: content[1],\n                itemId: itemId[1],\n                activedId: activedId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(RowItem, {\n                content: content[2],\n                itemId: itemId[2],\n                activedId: activedId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"area__row\",\n              children: [/*#__PURE__*/_jsxDEV(RowItem, {\n                content: content[7],\n                itemId: itemId[7],\n                activedId: activedId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(RowItem, {\n                content: content[3],\n                itemId: itemId[3],\n                activedId: activedId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"area__row\",\n              children: [/*#__PURE__*/_jsxDEV(RowItem, {\n                content: content[6],\n                itemId: itemId[6],\n                activedId: activedId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(RowItem, {\n                content: content[5],\n                itemId: itemId[5],\n                activedId: activedId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(RowItem, {\n                content: content[4],\n                itemId: itemId[4],\n                activedId: activedId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"lists\",\n          children: \"\\u60A8\\u7684\\u5956\\u54C1\\u5217\\u8868\\uFF1A \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"showLists\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"listStyle\",\n            children: newArr\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this);\n  }\n\n} // 以下是我写的Hooks版本，目前似乎无法完成动画效果，有小伙伴可以看看为什么吗\n// function App()\n// {\n//   const [activedId, setActivedId] = useState(0);\n//   const [prizeId, setPrizeId] = useState('');\n//   const [times, setTimes] = useState(0);\n//   const [actTimes, setActTimes] = useState(0);\n//   const [isRolling, setIsRolling] = useState(false);\n//   const [gold, setGold] = useState(0);\n//   const Charge = () => {\n//     // 充值金币\n//     setGold(gold + 100)\n//   }\n//   const handleBegin = () => {\n//     if (!isRolling && gold > 10)\n//     {\n//       setGold(gold - 10)\n//       setIsRolling(true)\n//       setActivedId(0)\n//       // 前端生成随机数决定抽奖结果，后续希望用NodeJS实现后端抽奖\n//       let prize = Math.floor(Math.random() * 8)\n//       console.log(prize)\n//       setPrizeId(prize)\n//       // 前端随机决定转动次数\n//       let time = itemId.length * Math.floor(Math.random() * 4 + 3)\n//       setTimes(time);\n//       const begin = setInterval(() => \n//       {\n//         if (activedId === prizeId && actTimes > times) \n//         {\n//           clearInterval(begin)\n//           setIsRolling(false)\n//           alert('恭喜获得 '+ content[prizeId] +'！请联系管理员兑换奖品')\n//         }\n//         if (activedId === 7) {\n//           setActivedId(0)\n//         } \n//         else \n//         {\n//           setActivedId(activedId + 1)\n//         }\n//         setActTimes(actTimes + 1)\n//       }, 70)\n//     }\n//     else if (!isRolling && gold < 10)\n//     {\n//       alert('金币余额不足，请充值')\n//     }\n//   }\n//   return (\n//           <div className=\"App\">\n//             <p>\n//               金币: {gold}\n//             </p>\n//             <div className=\"prize\">\n//               <div className=\"prize__container\">\n//                 <div className=\"container__area\">\n//                   <div className=\"begin__btn\" onClick={handleBegin}>\n//                     点击开始\n//                   </div>\n//                   <div className=\"area__row\">\n//                     <RowItem content={content[0]} itemId={itemId[0]} activedId={activedId} />\n//                     <RowItem content={content[1]} itemId={itemId[1]} activedId={activedId} />\n//                     <RowItem content={content[2]} itemId={itemId[2]} activedId={activedId} />\n//                   </div>\n//                   <div className=\"area__row\">\n//                     <RowItem content={content[7]} itemId={itemId[7]} activedId={activedId} />\n//                     <RowItem content={content[3]} itemId={itemId[3]} activedId={activedId} />\n//                   </div>\n//                   <div className=\"area__row\">\n//                     <RowItem content={content[6]} itemId={itemId[6]} activedId={activedId} />\n//                     <RowItem content={content[5]} itemId={itemId[5]} activedId={activedId} />\n//                     <RowItem content={content[4]} itemId={itemId[4]} activedId={activedId} />\n//                   </div>\n//                 </div>\n//               </div>\n//             </div>\n//             <button className=\"charge__btn\" onClick={Charge}>充值</button>\n//           </div>\n//         );\n// }\n\n\nexport default App;","map":{"version":3,"sources":["/Users/danni/Documents/GitHub/YouthCamp_TeamWork/src/App.js"],"names":["React","Component","RowItem","content","itemId","gainList","App","constructor","state","activedId","prizeId","times","actTimes","isRolling","gold","handleBegin","prize","Math","floor","random","randtimes","length","setState","begin","setInterval","clearInterval","alert","push","chargeGold","render","newArr","forEach","ele","index","temp"],"mappings":"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A;AAAA,sBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAbF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAVF,eAiCE;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA,gCACE;AAAG,UAAA,SAAS,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAK,UAAA,SAAS,EAAC,WAAf;AAAA,iCACE;AAAI,YAAA,SAAS,EAAC,WAAd;AAAA,sBAA2BqB;AAA3B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAjCF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AA0CD;;AAjJH,C,CAqJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,eAAexB,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport RowItem from './component/RowItem.js'\n\nconst content = ['爱奇艺会员', 'MacBook', '精美图书', '餐饮代金券', 'B站大会员', '巴厘岛7日游', 'iPhone 12', '钻石100']\nconst itemId = [0, 1, 2, 3, 4, 5, 6, 7]\nconst gainList = []\n\nclass App extends Component \n{\n  constructor() \n  {\n    super()\n    this.state = \n    {\n      // 被选中的格子的ID\n      activedId: '',\n      // 中奖ID\n      prizeId: null,\n      // 获得prizeId之后计算出的动画次数\n      times: 0,\n      // 当前动画次数\n      actTimes: 0,\n      // 是否正在抽奖\n      isRolling: false,\n      // 金币\n      gold: 0,\n      // 中奖数组\n      gainList: []\n    }\n  }\n\n  handleBegin() \n  {\n    // 判断是否在抽取过程中，以及金币是否足够\n    if (!this.state.isRolling && this.state.gold > 10) \n    {\n      // 前端随机获取一个中奖ID，后续工作希望使用NodeJS在后端进行抽奖\n      let prize = Math.floor(Math.random() * 8)\n      // console.log(prize)\n      // 随机算出一个动画执行的最小次数，这里可以随机变更数值，按自己的需求来\n      let randtimes = itemId.length * Math.floor(Math.random() * 4 + 3)\n      // 设置状态\n      this.setState({\n        activedId: 0,\n        prizeId: prize,\n        times: randtimes,\n        actTimes: 0,\n        isRolling: true,\n        gold: this.state.gold - 10,\n      })\n      // 抽奖动画执行开始\n      this.begin = setInterval(() => \n      {\n        if (this.state.activedId === this.state.prizeId && this.state.actTimes > this.state.times) \n        {\n          // 符合上述所有条件时才是中奖的时候，两个ID相同并且动画执行的次数大于(或等于也行)设定的最小次数\n          clearInterval(this.begin)\n          this.setState({\n            isRolling: false\n          })\n          alert('恭喜获得 '+ content[this.state.prizeId] +'！请联系管理员兑换奖品');\n          gainList.push(content[this.state.prizeId]);\n          // console.log(gainList);\n          return \n        }\n        // 以下是动画执行时对id的判断\n        if (this.state.activedId === 7) \n        {\n          this.setState({\n            activedId: 0,\n            actTimes: this.state.actTimes + 1\n          })\n        } \n        else \n        {\n          this.setState({\n            activedId: this.state.activedId + 1,\n            actTimes: this.state.actTimes + 1\n          })\n        }\n      }, 100)\n    }\n    else if (!this.state.isRolling && this.state.gold < 10)\n    {\n      // 余额不足\n      alert('金币余额不足，请充值')\n    }\n  }\n\n  chargeGold()\n  {\n    // 充值\n    this.setState({\n      gold: this.state.gold + 100\n    })\n  }\n\n  // showGainList()\n  // {\n  //   return\n\n  // }\n\n  render() \n  {\n    const {activedId, gold} = this.state;\n    const newArr = [];\n    gainList.forEach((ele,index) => {\n      var temp = <li key={index}>{ele}</li>;\n      newArr.push(temp);\n    })\n    return (\n      <div className=\"App\">\n        <div className=\"title\">幸 运 大 抽 奖</div>\n        <div className=\"left\">\n          <p className=\"intro\">欢迎来到幸运大抽奖！</p>\n          <p className=\"intro\">以下为您目前所持的金币数量。</p>\n          <div className=\"goldNum\"> \n            <div className=\"goldNumText\">金 币: {gold} </div>\n          </div>\n          <button className=\"charge__btn\" onClick={() => this.chargeGold()}>充 值</button>\n        </div> \n        <div className=\"centre\">\n          <div className=\"prize__container\">\n            <div className=\"container__area\">\n              <div className=\"begin__btn\" onClick={() => this.handleBegin()}>\n                点击开始\n              </div>\n              <div className=\"area__row\">\n                <RowItem content={content[0]} itemId={itemId[0]} activedId={activedId} />\n                <RowItem content={content[1]} itemId={itemId[1]} activedId={activedId} />\n                <RowItem content={content[2]} itemId={itemId[2]} activedId={activedId} />\n              </div>\n              <div className=\"area__row\">\n                <RowItem content={content[7]} itemId={itemId[7]} activedId={activedId} />\n                <RowItem content={content[3]} itemId={itemId[3]} activedId={activedId} />\n              </div>\n              <div className=\"area__row\">\n                <RowItem content={content[6]} itemId={itemId[6]} activedId={activedId} />\n                <RowItem content={content[5]} itemId={itemId[5]} activedId={activedId} />\n                <RowItem content={content[4]} itemId={itemId[4]} activedId={activedId} />\n              </div>\n            </div>\n          </div>\n        </div> \n        <div className=\"right\">\n          <p className=\"lists\">您的奖品列表： </p>\n          <div className=\"showLists\">\n            <ul className=\"listStyle\">{newArr}</ul>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n\n// 以下是我写的Hooks版本，目前似乎无法完成动画效果，有小伙伴可以看看为什么吗\n// function App()\n// {\n//   const [activedId, setActivedId] = useState(0);\n//   const [prizeId, setPrizeId] = useState('');\n//   const [times, setTimes] = useState(0);\n//   const [actTimes, setActTimes] = useState(0);\n//   const [isRolling, setIsRolling] = useState(false);\n//   const [gold, setGold] = useState(0);\n\n//   const Charge = () => {\n//     // 充值金币\n//     setGold(gold + 100)\n//   }\n\n//   const handleBegin = () => {\n//     if (!isRolling && gold > 10)\n//     {\n//       setGold(gold - 10)\n//       setIsRolling(true)\n//       setActivedId(0)\n//       // 前端生成随机数决定抽奖结果，后续希望用NodeJS实现后端抽奖\n//       let prize = Math.floor(Math.random() * 8)\n//       console.log(prize)\n//       setPrizeId(prize)\n//       // 前端随机决定转动次数\n//       let time = itemId.length * Math.floor(Math.random() * 4 + 3)\n//       setTimes(time);\n      \n//       const begin = setInterval(() => \n//       {\n//         if (activedId === prizeId && actTimes > times) \n//         {\n//           clearInterval(begin)\n//           setIsRolling(false)\n//           alert('恭喜获得 '+ content[prizeId] +'！请联系管理员兑换奖品')\n//         }\n//         if (activedId === 7) {\n//           setActivedId(0)\n//         } \n//         else \n//         {\n//           setActivedId(activedId + 1)\n//         }\n      \n//         setActTimes(actTimes + 1)\n\n//       }, 70)\n//     }\n//     else if (!isRolling && gold < 10)\n//     {\n//       alert('金币余额不足，请充值')\n//     }\n//   }\n  \n//   return (\n//           <div className=\"App\">\n//             <p>\n//               金币: {gold}\n//             </p>\n//             <div className=\"prize\">\n//               <div className=\"prize__container\">\n//                 <div className=\"container__area\">\n//                   <div className=\"begin__btn\" onClick={handleBegin}>\n//                     点击开始\n//                   </div>\n//                   <div className=\"area__row\">\n//                     <RowItem content={content[0]} itemId={itemId[0]} activedId={activedId} />\n//                     <RowItem content={content[1]} itemId={itemId[1]} activedId={activedId} />\n//                     <RowItem content={content[2]} itemId={itemId[2]} activedId={activedId} />\n//                   </div>\n//                   <div className=\"area__row\">\n//                     <RowItem content={content[7]} itemId={itemId[7]} activedId={activedId} />\n//                     <RowItem content={content[3]} itemId={itemId[3]} activedId={activedId} />\n//                   </div>\n//                   <div className=\"area__row\">\n//                     <RowItem content={content[6]} itemId={itemId[6]} activedId={activedId} />\n//                     <RowItem content={content[5]} itemId={itemId[5]} activedId={activedId} />\n//                     <RowItem content={content[4]} itemId={itemId[4]} activedId={activedId} />\n//                   </div>\n//                 </div>\n//               </div>\n//             </div>\n//             <button className=\"charge__btn\" onClick={Charge}>充值</button>\n//           </div>\n//         );\n// }\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}